# Configuration pour Heroku
quarkus.http.port=${PORT:9090}
quarkus.http.host=0.0.0.0

quarkus.datasource.db-kind=postgresql

quarkus.datasource.username=joellungu
quarkus.datasource.password=joellungu
quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/bridge

#quarkus.datasource.jdbc.url=${JDBC_DATABASE_URL}
#quarkus.datasource.username=${JDBC_DATABASE_USERNAME}
#quarkus.datasource.password=${JDBC_DATABASE_PASSWORD}

# ? IMPORTANT : Routes publiques
quarkus.http.auth.permission.permit-all.paths=/entreprises/save,/entreprises/login
quarkus.http.auth.permission.permit-all.policy=permit

#quarkus.http.limits.max-body-size=100M
#quarkus.http.multipart.max-file-size=100M
#quarkus.http.multipart.max-request-size=200M


#drop and create the database at startup (use `drop-and-create --update` to only update the schema)
quarkus.hibernate-orm.schema-management.strategy = update


# JWT avec RSA (MP JWT)
mp.jwt.verify.publickey.location=publicKey.pem
smallrye.jwt.verify.key.location=publicKey.pem
mp.jwt.verify.issuer=bridge
smallrye.jwt.sign.key.location=privateKey.pem
smallrye.jwt.encrypt.key.location=privateKey.pem

quarkus.native.resources.includes=publicKey.pem

# Audience et dur�e
# mp.jwt.verify.audiences=your-audience
smallrye.jwt.time-to-live=31536000

# Algorithm (RS256 par d�faut)
smallrye.jwt.algorithm=RS256

# Claims suppl�mentaires si besoin
# smallrye.jwt.claims.sub=user
# V�rifier le claim des r�les
# smallrye.jwt.claims.groups=role
# smallrye.jwt.path.groups=/groups
mp.jwt.verify.groupsClaim=groups
smallrye.jwt.path.groups=/groups

quarkus.http.auth.proactive=false

# Active CORS
quarkus.http.cors.enabled=true
# Autorise sp�cifiquement votre origine
quarkus.http.cors.origins=*
# Autorise toutes les m�thodes HTTP
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS,PATCH,HEAD
# Autorise tous les headers n�cessaires
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with,origin,access-control-allow-origin,access-control-allow-credentials
# Headers expos�s dans la r�ponse
quarkus.http.cors.exposed-headers=*
# Dur�e de mise en cache des pr�-v�rifications CORS
# quarkus.http.cors.access-control-max-age=86400

# Autorise les credentials (cookies, auth)
quarkus.http.cors.access-control-allow-credentials=true

# DGI endpoints (test / prod)
#dgi.api.invoice.test=https://developper.dgirdc.cd/edef/api/invoice
#dgi.api.invoice.prod=https://edef.dgirdc.cd/api/invoice
#dgi.api.info.test=https://developper.dgirdc.cd/edef/api/info
#dgi.api.info.prod=https://edef.dgirdc.cd/api/info

# Logs d�taill�s pour JWT
#quarkus.log.category."io.quarkus.smallrye.jwt".level=DEBUG
#quarkus.log.category."io.smallrye.jwt".level=DEBUG
#quarkus.log.category."org.eclipse.microprofile.jwt".level=DEBUG
#quarkus.log.category."io.quarkus.security".level=DEBUG

# Log SQL pour d�boguer
#quarkus.log.category."org.hibernate.SQL".level=DEBUG
#quarkus.log.category."org.hibernate.type.descriptor.sql".level=TRACE